{
  "slug": "real-time-cost-tracker",
  "description": "Real-time AI cost tracking statusline with per-session spend analytics, model pricing, and budget alerts",
  "category": "statuslines",
  "author": "JSONbored",
  "dateAdded": "2025-10-16",
  "tags": ["cost", "pricing", "budget", "analytics", "monitoring"],
  "statuslineType": "custom",
  "content": "#!/usr/bin/env bash\n\n# Real-Time Cost Tracker\n# Calculate session costs based on token usage\n\nread -r input\n\nmodel=$(echo \"$input\" | jq -r '.model // \"unknown\"')\ntokens=$(echo \"$input\" | jq -r '.session.totalTokens // 0')\n\n# 2025 Pricing (per 1M tokens)\nif [[ \"$model\" == *\"claude-sonnet-4\"* ]]; then\n  price_per_m=3.00\nelif [[ \"$model\" == *\"gpt-4\"* ]]; then\n  price_per_m=5.00\nelif [[ \"$model\" == *\"gemini\"* ]]; then\n  price_per_m=1.25\nelse\n  price_per_m=1.00\nfi\n\n# Calculate cost\ncost=$(awk \"BEGIN {printf \\\"%.4f\\\", ($tokens / 1000000) * $price_per_m}\")\n\n# Budget alert\nif (( $(echo \"$cost > 0.50\" | bc -l) )); then\n  color=\"\\033[31m\"  # Red\n  icon=\"⚠️\"\nelif (( $(echo \"$cost > 0.10\" | bc -l) )); then\n  color=\"\\033[33m\"  # Yellow\n  icon=\"💰\"\nelse\n  color=\"\\033[32m\"  # Green\n  icon=\"💵\"\nfi\n\necho -e \"${icon} ${color}$${cost}${color}\\033[0m │ ${tokens} tokens\"\n",
  "features": [
    "Real-time cost calculation",
    "2025 model pricing (Claude, GPT-4, Gemini)",
    "Budget threshold alerts",
    "Color-coded spend warnings",
    "Session cost tracking"
  ],
  "configuration": {
    "format": "bash",
    "refreshInterval": 1000,
    "position": "right"
  },
  "requirements": ["Bash", "jq", "bc calculator"],
  "preview": "💵 $0.0234 │ 7,800 tokens",
  "troubleshooting": [
    {
      "issue": "Cost calculation shows wrong decimal format with comma separator",
      "solution": "Set LC_NUMERIC=C at script start to enforce dot decimal separator. Some locales default to comma, breaking bc. Add: export LC_NUMERIC=C before math operations."
    },
    {
      "issue": "Pricing appears outdated or incorrect for current AI models",
      "solution": "Update price_per_m values. Claude Sonnet 4 is $3/M (2025), GPT-4o is $3/$10, Gemini 1.5 Pro is $3.50/M. Verify at provider docs before updating script."
    },
    {
      "issue": "bc: command not found when running cost calculations",
      "solution": "Install bc calculator: brew install bc (macOS), apt install bc (Ubuntu/Debian). Required for floating-point arithmetic in bash scripts."
    },
    {
      "issue": "Cost displays as $0.0000 despite high token usage",
      "solution": "Check printf precision: use %.4f for micro-dollars. Verify tokens populated: echo $tokens. If zero, test JSON parsing: echo \"$input\" | jq '.session.totalTokens'."
    }
  ],
  "source": "community"
}
