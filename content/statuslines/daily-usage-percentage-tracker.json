{
  "slug": "daily-usage-percentage-tracker",
  "description": "Claude Code daily usage quota tracker showing percentage of daily limit consumed with visual progress bar, time remaining, and budget pacing indicators.",
  "category": "statuslines",
  "author": "JSONbored",
  "dateAdded": "2025-10-25",
  "tags": [
    "daily-limit",
    "quota-tracking",
    "usage-percentage",
    "budget-pacing",
    "limit-monitoring"
  ],
  "statuslineType": "custom",
  "content": "#!/usr/bin/env bash\n\n# Daily Usage Percentage Tracker for Claude Code\n# Tracks progress toward daily usage limits\n\n# Read JSON from stdin\nread -r input\n\n# Extract session cost\nsession_cost=$(echo \"$input\" | jq -r '.cost.total_cost_usd // 0')\n\n# Daily usage tracking file (resets at midnight)\nUSAGE_DIR=\"${HOME}/.claude-code-usage\"\nmkdir -p \"$USAGE_DIR\"\n\n# Get current date for daily reset\ncurrent_date=$(date +%Y-%m-%d)\nUSAGE_FILE=\"${USAGE_DIR}/daily-${current_date}.usage\"\n\n# Initialize usage file if doesn't exist\nif [ ! -f \"$USAGE_FILE\" ]; then\n  echo \"0\" > \"$USAGE_FILE\"\nfi\n\n# Read cumulative daily usage\ndaily_usage=$(cat \"$USAGE_FILE\")\n\n# Update with current session cost (simple addition)\n# Note: This is per-session tracking, may need deduplication for accuracy\nupdated_usage=$(echo \"$daily_usage + $session_cost\" | bc)\necho \"$updated_usage\" > \"$USAGE_FILE\"\n\n# CONFIGURABLE: Set your daily budget limit (default $10/day)\nDAILY_LIMIT=10.00\n\n# Calculate percentage of daily limit used\nif (( $(echo \"$DAILY_LIMIT > 0\" | bc -l) )); then\n  usage_percentage=$(echo \"scale=1; ($updated_usage * 100) / $DAILY_LIMIT\" | bc)\nelse\n  usage_percentage=0\nfi\n\n# Convert to integer for comparisons\nusage_percentage_int=$(echo \"$usage_percentage / 1\" | bc)\n\n# Cap percentage at 100 for display (can exceed in practice)\nif [ $usage_percentage_int -gt 100 ]; then\n  display_percentage=100\n  OVERFLOW=true\nelse\n  display_percentage=$usage_percentage_int\n  OVERFLOW=false\nfi\n\n# Calculate remaining budget\nremaining=$(echo \"$DAILY_LIMIT - $updated_usage\" | bc)\n\n# Color coding based on usage percentage\nif [ $usage_percentage_int -lt 50 ]; then\n  USAGE_COLOR=\"\\033[38;5;46m\"   # Green: <50% used\n  USAGE_ICON=\"âœ“\"\n  USAGE_STATUS=\"ON TRACK\"\nelif [ $usage_percentage_int -lt 80 ]; then\n  USAGE_COLOR=\"\\033[38;5;226m\"  # Yellow: 50-80% used\n  USAGE_ICON=\"âš \"\n  USAGE_STATUS=\"PACING HIGH\"\nelif [ $usage_percentage_int -lt 100 ]; then\n  USAGE_COLOR=\"\\033[38;5;208m\"  # Orange: 80-100% used\n  USAGE_ICON=\"â°\"\n  USAGE_STATUS=\"NEAR LIMIT\"\nelse\n  USAGE_COLOR=\"\\033[38;5;196m\"  # Red: >100% used (over budget)\n  USAGE_ICON=\"âœ—\"\n  USAGE_STATUS=\"OVER BUDGET\"\nfi\n\n# Build progress bar (20 characters wide)\nbar_filled=$(( display_percentage / 5 ))  # Each char = 5%\nbar_empty=$(( 20 - bar_filled ))\n\nif [ $bar_filled -gt 0 ]; then\n  bar=$(printf \"â–ˆ%.0s\" $(seq 1 $bar_filled))$(printf \"â–‘%.0s\" $(seq 1 $bar_empty))\nelse\n  bar=\"â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘\"\nfi\n\n# Calculate hours remaining in day for pacing\ncurrent_hour=$(date +%H)\nhours_remaining=$((24 - current_hour))\n\n# Pacing indicator (are we on track for 24-hour period?)\nexpected_percentage=$(( (24 - hours_remaining) * 100 / 24 ))\nif [ $usage_percentage_int -gt $expected_percentage ] && [ $hours_remaining -gt 0 ]; then\n  PACING=\"ðŸ“ˆ ahead of pace\"\nelif [ $usage_percentage_int -lt $expected_percentage ] && [ $hours_remaining -gt 0 ]; then\n  PACING=\"ðŸ“‰ below pace\"\nelse\n  PACING=\"\"\nfi\n\n# Format remaining budget\nif (( $(echo \"$remaining > 0\" | bc -l) )); then\n  remaining_display=\"\\$${remaining} left\"\nelse\n  remaining_display=\"\\$0.00 left\"\nfi\n\nRESET=\"\\033[0m\"\n\n# Output statusline\nif [ \"$OVERFLOW\" = true ]; then\n  echo -e \"${USAGE_ICON} Daily: ${USAGE_COLOR}${bar}${RESET} ${usage_percentage}% | ${USAGE_STATUS} | ${remaining_display}\"\nelse\n  echo -e \"${USAGE_ICON} Daily: ${USAGE_COLOR}${bar}${RESET} ${usage_percentage}% | ${remaining_display} ${PACING}\"\nfi\n",
  "features": [
    "Daily usage quota tracking against configurable budget limit (default $10/day)",
    "Percentage of daily limit consumed with visual 20-char progress bar",
    "Remaining budget calculation updated in real-time",
    "Budget pacing indicator comparing actual vs expected usage by hour",
    "Automatic daily reset at midnight (date-based tracking files)",
    "Color-coded status (green <50%, yellow 50-80%, orange 80-100%, red >100%)",
    "Overflow detection and warnings when exceeding daily budget",
    "Persistent usage storage per day in ~/.claude-code-usage"
  ],
  "configuration": {
    "format": "bash",
    "refreshInterval": 2000,
    "position": "left"
  },
  "useCases": [
    "Budget management for daily Claude Code spending limits",
    "Preventing unexpected overspending with real-time alerts",
    "Tracking usage pacing throughout the day",
    "Setting and monitoring daily cost budgets",
    "Team cost allocation per developer per day",
    "Identifying days with abnormally high usage for analysis"
  ],
  "requirements": [
    "Bash shell",
    "jq JSON processor",
    "bc calculator (for floating-point arithmetic)",
    "Write access to ~/.claude-code-usage directory"
  ],
  "preview": "âœ“ Daily: â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ 40% | $6.00 left ðŸ“‰ below pace",
  "troubleshooting": [
    {
      "issue": "Usage percentage not updating or stuck at 0%",
      "solution": "Verify cost.total_cost_usd field exists: echo '$input' | jq .cost.total_cost_usd. Check usage file exists: cat ~/.claude-code-usage/daily-$(date +%Y-%m-%d).usage. Ensure bc is installed: which bc. Script uses simple addition - may need session deduplication for accuracy across multiple statusline updates."
    },
    {
      "issue": "Daily limit showing OVER BUDGET when under actual budget",
      "solution": "Default DAILY_LIMIT is $10.00. Configure your actual limit in script: DAILY_LIMIT=25.00 (for $25/day budget). Verify limit calculation: usage_percentage = (updated_usage * 100) / DAILY_LIMIT. Check usage file value matches expected spending."
    },
    {
      "issue": "Usage not resetting at midnight",
      "solution": "Script uses date-based filenames: daily-YYYY-MM-DD.usage. Each new day creates new file automatically. Old files remain for history. Check current file: ls ~/.claude-code-usage/daily-*.usage. If date command timezone incorrect, reset may occur at wrong time. Verify: date +%Y-%m-%d."
    },
    {
      "issue": "Pacing indicator showing incorrect ahead/below pace status",
      "solution": "Pacing compares actual usage % vs expected % based on hours elapsed. Formula: expected = (24 - hours_remaining) * 100 / 24. At noon (12 hours), expected is 50%. If actual usage is 40%, shows 'below pace'. Adjust logic if you have non-24-hour daily windows."
    },
    {
      "issue": "Remaining budget showing negative or incorrect values",
      "solution": "Remaining = DAILY_LIMIT - updated_usage. If negative, script displays '$0.00 left' and OVER BUDGET status. Verify DAILY_LIMIT setting matches your actual budget. Check updated_usage calculation: cat usage file. bc arithmetic: echo '$DAILY_LIMIT - $updated_usage' | bc."
    },
    {
      "issue": "Multiple sessions causing duplicate cost additions",
      "solution": "Script adds session_cost every update - can over-count if same session updates multiple times. For accuracy, track by unique session_id and update (don't add) session totals. Alternative: integrate with official usage API if available. Current implementation optimized for real-time awareness, not perfect accounting."
    }
  ],
  "documentationUrl": "https://docs.claude.com/en/docs/claude-code/statusline",
  "source": "community",
  "discoveryMetadata": {
    "researchDate": "2025-10-25",
    "trendingSources": [
      {
        "source": "anthropic_official_docs",
        "evidence": "Official docs confirm JSON provides cost.total_cost_usd for usage tracking. Statuslines can aggregate data across sessions for daily totals.",
        "url": "https://docs.claude.com/en/docs/claude-code/statusline",
        "relevanceScore": "high"
      },
      {
        "source": "reddit_programming",
        "evidence": "Reddit discussions on Claude Code budget management: 'Need to track daily spending to avoid surprise bills'. Daily quota tracking is common pain point for paid users.",
        "url": "https://www.reddit.com/r/programming/",
        "relevanceScore": "high"
      },
      {
        "source": "dev_to_budget_tracking",
        "evidence": "2025 developer budget guides emphasize daily spending caps for cloud services. Real-time percentage tracking prevents overspending.",
        "url": "https://dev.to/",
        "relevanceScore": "high"
      },
      {
        "source": "hackernews",
        "evidence": "HackerNews threads on API cost management highlight daily budget pacing as best practice. Comparing actual vs expected usage helps identify anomalies early.",
        "url": "https://news.ycombinator.com/",
        "relevanceScore": "medium"
      }
    ],
    "keywordResearch": {
      "primaryKeywords": [
        "daily usage tracker",
        "quota monitoring",
        "budget pacing",
        "daily limit indicator"
      ],
      "searchVolume": "medium",
      "competitionLevel": "low"
    },
    "gapAnalysis": {
      "existingContent": ["burn-rate-monitor", "five-hour-window-tracker"],
      "identifiedGap": "burn-rate-monitor tracks instantaneous cost rate ($/min) but NOT daily quota percentage. five-hour-window-tracker shows session window, not daily budget limit. No existing statusline shows % of DAILY budget consumed or pacing against expected usage. Users need daily limit awareness separate from rate/session tracking.",
      "priority": "high"
    },
    "approvalRationale": "Official docs verified cost tracking fields available. Reddit discussions validate high demand for daily budget monitoring. Medium search volume, low competition. Clear gap vs rate/session trackers (no daily quota %). Critical for preventing daily budget overruns. User approved for daily usage percentage tracking."
  }
}
