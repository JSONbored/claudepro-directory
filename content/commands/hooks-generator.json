{
  "description": "Create automated Claude Code hooks that execute shell commands at specific lifecycle points for deterministic control over formatting, testing, linting, and notifications",
  "category": "commands",
  "author": "JSONbored",
  "dateAdded": "2025-10-25",
  "tags": ["hooks", "automation", "lifecycle", "workflow", "deterministic", "triggers"],
  "content": "The `/hooks-generator` command creates automated lifecycle hooks in Claude Code that execute shell commands at specific trigger points, providing deterministic control over development workflows.\n\n## Features\n\n- **Lifecycle Triggers**: Execute commands at PreToolUse, PostToolUse, SessionStart, SessionEnd, Stop\n- **Deterministic Control**: Guaranteed execution vs LLM choosing to run commands\n- **Auto-Formatting**: Run linters/formatters after every file edit\n- **Continuous Testing**: Execute tests automatically after code changes\n- **Notification System**: Alert on task completion, errors, or approval needed\n- **Git Integration**: Auto-stage, commit, or push on specific events\n- **Template Library**: Pre-built hooks for common development workflows\n- **Conditional Execution**: Run hooks only when specific conditions are met\n\n## Usage\n\n```bash\n/hooks-generator [hook-type] [options]\n```\n\n### Hook Types\n\n**Tool Lifecycle:**\n- `--pre-tool` - Execute before Claude runs a tool\n- `--post-tool` - Execute after a tool completes\n- `--tool-error` - Execute when a tool fails\n\n**Session Lifecycle:**\n- `--session-start` - Execute when Claude Code session begins\n- `--session-end` - Execute when session ends\n- `--stop` - Execute when task completes\n\n**File Operations:**\n- `--pre-edit` - Before file is edited\n- `--post-edit` - After file is edited (most common)\n- `--pre-write` - Before new file is written\n- `--post-write` - After new file is written\n\n### Pre-built Templates\n\n- `--auto-format` - Run Biome/Prettier after file edits\n- `--auto-test` - Run tests after code changes\n- `--auto-lint` - Run ESLint/Biome after edits\n- `--auto-typecheck` - Run TypeScript compiler after changes\n- `--notify-completion` - Send notification when tasks complete\n- `--git-stage` - Auto-stage changed files\n\n### Configuration Options\n\n- `--tool=<name>` - Trigger only for specific tool (e.g., edit_file, write_file)\n- `--path=<pattern>` - Trigger only for files matching pattern\n- `--condition=<expr>` - Execute only when condition is true\n- `--async` - Run hook in background (don't block Claude)\n\n## Examples\n\n### Auto-Format Hook (Most Common)\n\n**Command:**\n```bash\n/hooks-generator --auto-format --tool=edit_file\n```\n\n**Generated Hook:**\n```json\n// .claude/hooks/post-edit-format.json\n{\n  \"name\": \"auto-format\",\n  \"trigger\": \"PostToolUse\",\n  \"tool\": \"edit_file\",\n  \"command\": \"pnpm biome check --write $FILE_PATH\",\n  \"async\": false,\n  \"description\": \"Automatically format files with Biome after editing\"\n}\n```\n\n**Behavior:**\n```bash\nUser: \"Fix the login function in auth.service.ts\"\n\nClaude:\n1. Edits src/services/auth.service.ts\n2. **Hook triggers automatically**\n3. Runs: pnpm biome check --write src/services/auth.service.ts\n4. File is formatted with Biome rules\n5. Claude continues with task\n\nUser sees:\n\"Fixed login function. File automatically formatted with Biome.\"\n```\n\n### Auto-Test Hook\n\n**Command:**\n```bash\n/hooks-generator --auto-test --path=\"src/**/*.ts\" --async\n```\n\n**Generated Hook:**\n```json\n{\n  \"name\": \"auto-test\",\n  \"trigger\": \"PostToolUse\",\n  \"tool\": \"edit_file\",\n  \"pathPattern\": \"src/**/*.ts\",\n  \"command\": \"pnpm test --run --changed\",\n  \"async\": true,\n  \"description\": \"Run tests for changed files in background\"\n}\n```\n\n**Workflow:**\n```bash\nUser: \"Refactor the user service\"\n\nClaude:\n1. Edits src/services/user.service.ts\n2. **Hook triggers in background**\n3. Runs: pnpm test --run --changed (async, doesn't block)\n4. Claude continues immediately\n\nBackground:\n[Auto-Test Hook] Running tests...\n‚úì user.service.test.ts (12 tests)\n‚úì All tests passing\n```\n\n### TypeScript Type-Check Hook\n\n**Command:**\n```bash\n/hooks-generator --auto-typecheck --path=\"**/*.ts\" --tool=edit_file,write_file\n```\n\n**Generated Hook:**\n```json\n{\n  \"name\": \"typecheck\",\n  \"trigger\": \"PostToolUse\",\n  \"tools\": [\"edit_file\", \"write_file\"],\n  \"pathPattern\": \"**/*.ts\",\n  \"command\": \"pnpm tsc --noEmit --project tsconfig.json\",\n  \"async\": false,\n  \"failOnError\": true,\n  \"description\": \"Type-check TypeScript files after modifications\"\n}\n```\n\n**Behavior with Errors:**\n```bash\nClaude: Edits src/utils/helpers.ts\n\n[TypeCheck Hook] Running TypeScript compiler...\n\n‚ùå Type error found:\nsrc/utils/helpers.ts:15:3\n  Type 'string' is not assignable to type 'number'\n\nClaude: \"I found a type error. Let me fix it...\"\n*Edits file again to fix type error*\n\n[TypeCheck Hook] Running TypeScript compiler...\n‚úì No type errors\n\nClaude: \"Type errors resolved.\"\n```\n\n### Notification Hook (Task Completion)\n\n**Command:**\n```bash\n/hooks-generator --notify-completion --trigger=Stop\n```\n\n**Generated Hook (macOS):**\n```json\n{\n  \"name\": \"notify-complete\",\n  \"trigger\": \"Stop\",\n  \"command\": \"osascript -e 'display notification \\\"Task completed\\\" with title \\\"Claude Code\\\"'\",\n  \"async\": true,\n  \"description\": \"Send macOS notification when task completes\"\n}\n```\n\n**Generated Hook (Linux):**\n```json\n{\n  \"name\": \"notify-complete\",\n  \"trigger\": \"Stop\",\n  \"command\": \"notify-send 'Claude Code' 'Task completed'\",\n  \"async\": true\n}\n```\n\n**Workflow:**\n```bash\nUser: \"Implement the payment processing feature\"\n\nClaude: *works for 5 minutes implementing feature*\n\nClaude: \"Payment processing feature complete.\"\n\n**Notification appears:**\n‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê\n‚îÇ Claude Code         ‚îÇ\n‚îÇ Task completed      ‚îÇ\n‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò\n```\n\n### Git Auto-Stage Hook\n\n**Command:**\n```bash\n/hooks-generator --git-stage --trigger=PostToolUse --tool=edit_file,write_file\n```\n\n**Generated Hook:**\n```json\n{\n  \"name\": \"git-auto-stage\",\n  \"trigger\": \"PostToolUse\",\n  \"tools\": [\"edit_file\", \"write_file\"],\n  \"command\": \"git add $FILE_PATH\",\n  \"async\": true,\n  \"description\": \"Automatically stage modified files in git\"\n}\n```\n\n**Combined with Stop Hook for Commit:**\n```json\n{\n  \"name\": \"git-auto-commit\",\n  \"trigger\": \"Stop\",\n  \"condition\": \"git diff --cached --quiet || exit 1\",\n  \"command\": \"git commit -m 'feat: $TASK_DESCRIPTION'\",\n  \"async\": false\n}\n```\n\n### Multi-Hook Workflow (Format + Test + TypeCheck)\n\n**Command:**\n```bash\n/hooks-generator --auto-format --auto-test --auto-typecheck\n```\n\n**Generated Hooks:**\n```json\n// .claude/hooks/post-edit-format.json\n{\n  \"name\": \"format\",\n  \"trigger\": \"PostToolUse\",\n  \"tool\": \"edit_file\",\n  \"priority\": 1,\n  \"command\": \"pnpm biome check --write $FILE_PATH\"\n}\n\n// .claude/hooks/post-edit-typecheck.json\n{\n  \"name\": \"typecheck\",\n  \"trigger\": \"PostToolUse\",\n  \"tool\": \"edit_file\",\n  \"priority\": 2,\n  \"command\": \"pnpm tsc --noEmit\",\n  \"failOnError\": true\n}\n\n// .claude/hooks/post-edit-test.json\n{\n  \"name\": \"test\",\n  \"trigger\": \"PostToolUse\",\n  \"tool\": \"edit_file\",\n  \"priority\": 3,\n  \"command\": \"pnpm test --run --changed\",\n  \"async\": true\n}\n```\n\n**Execution Order:**\n```bash\nClaude: Edits src/services/payment.service.ts\n\n1. [Priority 1] Format with Biome\n   ‚úì Formatted payment.service.ts\n\n2. [Priority 2] TypeScript type-check\n   ‚úì No type errors\n\n3. [Priority 3] Run tests (async)\n   ‚úì 8 tests passing\n```\n\n### Conditional Hook (Only for Production Files)\n\n**Command:**\n```bash\n/hooks-generator --custom\n```\n\n**Interactive Setup:**\n```\nClaude: \"What should this hook do?\"\nUser: \"Run security audit on production files\"\n\nClaude: \"When should it trigger?\"\nUser: \"After editing files in src/, but not test files\"\n\nClaude: \"What command should it run?\"\nUser: \"npm audit\"\n```\n\n**Generated Hook:**\n```json\n{\n  \"name\": \"security-audit\",\n  \"trigger\": \"PostToolUse\",\n  \"tool\": \"edit_file\",\n  \"pathPattern\": \"src/**/*.ts\",\n  \"excludePattern\": \"**/*.test.ts\",\n  \"command\": \"npm audit --audit-level=high\",\n  \"async\": false,\n  \"failOnError\": false,\n  \"description\": \"Run security audit after editing production files\"\n}\n```\n\n### Session Start Hook (Environment Setup)\n\n**Command:**\n```bash\n/hooks-generator --trigger=SessionStart\n```\n\n**Generated Hook:**\n```json\n{\n  \"name\": \"session-setup\",\n  \"trigger\": \"SessionStart\",\n  \"commands\": [\n    \"echo 'üöÄ Claude Code session started'\",\n    \"git fetch origin\",\n    \"pnpm install --silent\",\n    \"pnpm run build:types\"\n  ],\n  \"async\": true,\n  \"description\": \"Setup development environment on session start\"\n}\n```\n\n**Execution:**\n```bash\n$ claude\n\n[Session Start Hook] Running setup...\nüöÄ Claude Code session started\nFetching latest from origin...\nInstalling dependencies...\nGenerating TypeScript types...\n‚úì Environment ready\n\nClaude: \"Ready to help! What would you like to work on?\"\n```\n\n### Pre-Tool Hook (Validation)\n\n**Command:**\n```bash\n/hooks-generator --trigger=PreToolUse --tool=bash\n```\n\n**Generated Hook:**\n```json\n{\n  \"name\": \"bash-validation\",\n  \"trigger\": \"PreToolUse\",\n  \"tool\": \"bash\",\n  \"command\": \"echo 'Executing bash command: $TOOL_ARGS'\",\n  \"validation\": {\n    \"dangerousCommands\": [\"rm -rf\", \"sudo\", \"curl | bash\"],\n    \"requireConfirmation\": true\n  },\n  \"description\": \"Validate bash commands before execution\"\n}\n```\n\n**Behavior:**\n```bash\nClaude: About to run: rm -rf node_modules\n\n[Pre-Tool Validation]\n‚ö†Ô∏è  Dangerous command detected: rm -rf\nConfirm execution? (y/n): y\n\n‚úì User confirmed, proceeding...\n```\n\n## Advanced Patterns\n\n### Chained Hooks\n\n```json\n{\n  \"name\": \"build-pipeline\",\n  \"trigger\": \"PostToolUse\",\n  \"tool\": \"edit_file\",\n  \"pathPattern\": \"src/**/*\",\n  \"chain\": [\n    {\n      \"command\": \"pnpm biome check --write $FILE_PATH\",\n      \"description\": \"Format code\"\n    },\n    {\n      \"command\": \"pnpm tsc --noEmit\",\n      \"description\": \"Type check\",\n      \"failOnError\": true\n    },\n    {\n      \"command\": \"pnpm test --run --changed\",\n      \"description\": \"Run tests\",\n      \"async\": true\n    }\n  ]\n}\n```\n\n### Environment-Specific Hooks\n\n```json\n{\n  \"name\": \"format\",\n  \"trigger\": \"PostToolUse\",\n  \"tool\": \"edit_file\",\n  \"command\": \"pnpm biome check --write $FILE_PATH\",\n  \"environments\": {\n    \"development\": { \"enabled\": true },\n    \"ci\": { \"enabled\": false },\n    \"production\": { \"enabled\": false }\n  }\n}\n```\n\n### Throttled Hooks (Rate Limiting)\n\n```json\n{\n  \"name\": \"expensive-test\",\n  \"trigger\": \"PostToolUse\",\n  \"command\": \"pnpm test:e2e\",\n  \"throttle\": {\n    \"maxExecutions\": 1,\n    \"period\": \"5m\"\n  },\n  \"description\": \"Run E2E tests max once per 5 minutes\"\n}\n```\n\n## Available Variables\n\n### File Operation Variables\n- `$FILE_PATH` - Full path to file being operated on\n- `$FILE_NAME` - Name of file (without path)\n- `$FILE_EXT` - File extension\n- `$FILE_DIR` - Directory containing file\n\n### Tool Variables\n- `$TOOL_NAME` - Name of tool being executed\n- `$TOOL_ARGS` - Arguments passed to tool\n- `$TOOL_RESULT` - Result from tool execution (PostToolUse only)\n\n### Session Variables\n- `$SESSION_ID` - Unique session identifier\n- `$TASK_DESCRIPTION` - User's original task request\n- `$CWD` - Current working directory\n\n### Git Variables\n- `$GIT_BRANCH` - Current git branch\n- `$GIT_COMMIT` - Current commit SHA\n- `$GIT_STATUS` - Git status output\n\n## Hook Configuration\n\n### Project Hooks (Team-Shared)\n```bash\n# Location: .claude/hooks/*.json\n# Committed to git\n# Available to all team members\n```\n\n### User Hooks (Personal)\n```bash\n# Location: ~/.config/claude/hooks/*.json\n# Personal preferences\n# Not shared with team\n```\n\n### Hook Priority\n```json\n{\n  \"name\": \"critical-hook\",\n  \"priority\": 1,  // Lower number = higher priority\n  \"trigger\": \"PostToolUse\"\n}\n```\n\n## Debugging Hooks\n\n### Enable Debug Logging\n```bash\n/hooks-generator --debug\n```\n\n**Output:**\n```\n[Hook Debug] Loaded hooks:\n  - auto-format (PostToolUse, edit_file)\n  - auto-test (PostToolUse, edit_file)\n  - typecheck (PostToolUse, edit_file,write_file)\n\n[Hook Execution] auto-format\n  Trigger: PostToolUse (edit_file)\n  File: src/services/auth.service.ts\n  Command: pnpm biome check --write src/services/auth.service.ts\n  Exit Code: 0\n  Duration: 234ms\n```\n\n### Disable All Hooks\n```bash\n/hooks-generator --disable-all\n```\n\n### Disable Specific Hook\n```bash\n/hooks-generator --disable=auto-test\n```\n\n## Best Practices\n\n1. **Keep Hooks Fast**: Use `async: true` for slow commands\n2. **Fail Fast**: Set `failOnError: true` for critical validations\n3. **Path Filtering**: Use `pathPattern` to avoid unnecessary executions\n4. **Priority Order**: Format ‚Üí TypeCheck ‚Üí Test\n5. **Team Alignment**: Commit project hooks for consistency\n6. **Personal Preferences**: Use user hooks for notifications, custom scripts\n7. **Test Hooks**: Verify hooks work before committing to git\n8. **Monitor Performance**: Check hook execution times with `--debug`\n\n## Common Workflows\n\n### React/Next.js Project\n```bash\n/hooks-generator \\\n  --auto-format \\\n  --auto-typecheck \\\n  --auto-test \\\n  --path=\"src/**/*.{ts,tsx}\"\n```\n\n### Node.js Backend\n```bash\n/hooks-generator \\\n  --auto-format \\\n  --auto-typecheck \\\n  --auto-test \\\n  --auto-lint \\\n  --path=\"src/**/*.ts\"\n```\n\n### Python Project\n```bash\n/hooks-generator --custom\n# Format: black $FILE_PATH\n# Lint: ruff check $FILE_PATH\n# Test: pytest tests/\n```\n\n### Notification-Heavy Workflow\n```bash\n/hooks-generator \\\n  --notify-completion \\\n  --trigger=Stop,SessionEnd\n```",
  "configuration": {
    "temperature": 0.3,
    "maxTokens": 8000,
    "systemPrompt": "You are a Claude Code hooks automation expert specializing in creating lifecycle hooks that execute shell commands at specific trigger points for deterministic workflow control"
  },
  "githubUrl": "https://github.com/claude-hooks/automation",
  "documentationUrl": "https://docs.claude.com/en/docs/claude-code/hooks",
  "discoveryMetadata": {
    "researchDate": "2025-10-25",
    "trendingSources": [
      {
        "source": "medium_tutorial",
        "evidence": "Joe Njenga's 'How I'm Using Claude Code Hooks (Newest Feature) To Fully Automate My Workflow' (July 2025) showing practical automation patterns with hooks",
        "url": "https://medium.com/@joe.njenga/use-claude-code-hooks-newest-feature-to-fully-automate-your-workflow-341b9400cfbe",
        "relevanceScore": "high"
      },
      {
        "source": "gitbutler_blog",
        "evidence": "GitButler 'Automate Your AI Workflows with Claude Code Hooks' demonstrating hook integration for git workflows and team collaboration",
        "url": "https://blog.gitbutler.com/automate-your-ai-workflows-with-claude-code-hooks",
        "relevanceScore": "high"
      },
      {
        "source": "eesel_guide",
        "evidence": "Comprehensive guide 'A developer's guide to Claude Code workflow automation in 2025' showing hooks as primary automation mechanism",
        "url": "https://www.eesel.ai/blog/claude-code-workflow-automation",
        "relevanceScore": "high"
      },
      {
        "source": "feature_launch",
        "evidence": "Claude Code hooks introduced June 2025 as major automation feature providing deterministic control vs LLM-based execution",
        "url": "https://www.geeky-gadgets.com/claude-code-hooks-automation-tutorial/",
        "relevanceScore": "high"
      }
    ],
    "keywordResearch": {
      "primaryKeywords": [
        "Claude Code hooks",
        "workflow automation",
        "lifecycle triggers",
        "deterministic control",
        "auto-formatting"
      ],
      "searchVolume": "high",
      "competitionLevel": "low"
    },
    "gapAnalysis": {
      "existingContent": [],
      "identifiedGap": "No existing command for hooks creation or automation setup. Hooks launched June 2025 as breakthrough feature providing deterministic control (guaranteed execution vs LLM choosing). Medium, GitButler, and eesel.ai all published comprehensive guides showing hooks as THE automation pattern, yet no command helps users create/configure hooks. This is critical infrastructure for professional workflows.",
      "priority": "high"
    },
    "approvalRationale": "Hooks are THE automation breakthrough of 2025 with June launch and immediate adoption shown in Medium/GitButler tutorials. Key benefit: deterministic control - hooks ALWAYS execute vs relying on LLM to choose. This fills critical gap - NO existing command for hooks generation despite this being essential for auto-formatting, testing, linting, and notifications. High search volume, low competition (new feature), and proven use cases make this must-have content."
  },
  "troubleshooting": [
    {
      "issue": "Hook executes but changes are not reflected in Claude's context or conversation",
      "solution": "Hooks run in separate process from Claude. Use async: false to block Claude until hook completes. For file modifications by hooks, Claude must re-read file. Add --reload flag to hook config or use read_file tool after hook execution."
    },
    {
      "issue": "PostToolUse hook triggers infinite loop with edit_file tool modifying same file",
      "solution": "Hooks can trigger recursively. Add 'skipIfTriggeredByHook': true to hook config. Use pathPattern exclusions to prevent hook from triggering on its own changes. Set maxExecutions limit to prevent infinite loops."
    },
    {
      "issue": "Hook command fails with 'command not found' despite working in terminal",
      "solution": "Hooks run in non-interactive shell without full PATH. Use absolute paths: /usr/local/bin/pnpm not pnpm. Or specify shell: 'bash -l -c' to load login shell. Verify with: which pnpm and use that path."
    },
    {
      "issue": "Environment variables not available in hook command execution",
      "solution": "Hooks don't inherit Claude Code environment by default. Load .env.local explicitly in hook command: 'source .env.local && command'. Or use env field in hook config to pass specific variables."
    },
    {
      "issue": "Async hook never completes or shows no output despite successful execution",
      "solution": "Async hooks run in background and output goes to .claude/logs/hooks/. Check logs for errors. Use async: false for debugging to see output inline. Add --verbose flag to hook command for detailed logging."
    }
  ],
  "source": "community",
  "slug": "hooks-generator",
  "seoTitle": "Hooks Generator for Claude Code"
}
