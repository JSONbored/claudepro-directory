{
  "description": "Manage Claude Code checkpoints to safely rewind code changes, restore conversation states, and explore alternatives without fear using ESC+ESC or /rewind commands",
  "category": "commands",
  "author": "JSONbored",
  "dateAdded": "2025-10-25",
  "tags": ["checkpoints", "rewind", "undo", "version-control", "session-recovery", "safety"],
  "content": "The `/checkpoint-manager` command helps you manage Claude Code's automatic checkpointing system to safely rewind changes, explore alternatives, and code without fear.\n\n## Features\n\n- **Automatic Checkpoints**: Snapshots saved before every Claude-driven file edit\n- **Quick Rewind**: Press ESC+ESC or use `/rewind` to access checkpoint menu\n- **Selective Restore**: Restore code only, conversation only, or both\n- **Change Preview**: See exactly what will be reverted before confirming\n- **Session-Level Recovery**: Checkpoints tracked within current session\n- **Manual Checkpoints**: Create named checkpoints at critical points\n- **Checkpoint History**: View all checkpoints with timestamps and descriptions\n- **Safe Exploration**: Try risky changes knowing you can rewind\n\n## Usage\n\n```bash\n/checkpoint-manager [action] [options]\n```\n\n### Actions\n\n- `--rewind` - Open checkpoint menu to restore previous state\n- `--create` - Manually create named checkpoint\n- `--list` - Show all checkpoints in current session\n- `--preview` - Preview changes that will be reverted\n- `--auto-checkpoint` - Configure automatic checkpoint settings\n\n### Restore Options\n\n- `--code-only` - Revert file changes, keep conversation\n- `--conversation-only` - Rewind conversation, keep code changes\n- `--both` - Restore both code and conversation (default)\n\n### Checkpoint Settings\n\n- `--enable-auto` - Enable automatic checkpointing (default: true)\n- `--disable-auto` - Disable automatic checkpointing\n- `--interval=<n>` - Create checkpoint every N file edits\n\n## Quick Access\n\n### ESC+ESC Method (Fastest)\n```bash\n# During any Claude Code session:\n# Press ESC twice quickly\n\n[Checkpoint Menu]\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚ Rewind to Previous State                    â”‚\nâ”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤\nâ”‚ 1. [2 min ago] Added user authentication    â”‚\nâ”‚    Files: auth.service.ts, user.model.ts    â”‚\nâ”‚                                             â”‚\nâ”‚ 2. [5 min ago] Fixed login validation      â”‚\nâ”‚    Files: auth.service.ts                   â”‚\nâ”‚                                             â”‚\nâ”‚ 3. [12 min ago] Created auth endpoint       â”‚\nâ”‚    Files: routes/auth.ts                    â”‚\nâ”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤\nâ”‚ [R] Restore Code Only                       â”‚\nâ”‚ [C] Restore Conversation Only               â”‚\nâ”‚ [B] Restore Both                            â”‚\nâ”‚ [ESC] Cancel                                â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n```\n\n### /rewind Command Method\n```bash\n/rewind\n\n# Opens same checkpoint menu\n# Select checkpoint by number\n# Choose restore type\n```\n\n## Examples\n\n### Basic Rewind Workflow\n\n**Scenario: Risky refactoring went wrong**\n\n```bash\nUser: \"Refactor the payment service to use async/await\"\n\nClaude: *refactors 15 files*\n\n[Automatic Checkpoint Created]\nSnapshot: Before payment service refactor\nFiles: 15 modified\n\nUser: *tests application*\nUser: \"The payment flow is broken now\"\n\n# Press ESC+ESC\n\n[Checkpoint Menu]\n1. [1 min ago] Refactored payment service\n   Files: payment.service.ts, payment.controller.ts, ...\n\nSelect: 1\nRestore: [B] Both code and conversation\n\nâœ“ Restored to checkpoint\nâœ“ 15 files reverted\nâœ“ Conversation rewound to before refactor\n\nClaude: \"Reverted to before payment service refactor. Would you like to try a different approach?\"\n```\n\n### Code-Only Restore (Keep Conversation)\n\n**Scenario: Want to keep discussion but undo code changes**\n\n```bash\nClaude: *implements feature with extensive discussion*\n\nUser: \"Actually, I prefer the old implementation\"\n\n/rewind\n\n[Select Checkpoint]\n1. [5 min ago] Implemented notification system\n   Files: notification.service.ts, email.template.ts\n\nSelect: 1\nRestore: [R] Code Only\n\nâœ“ Code reverted to checkpoint\nâœ“ Conversation preserved\n\nClaude: \"I've reverted the code changes but kept our discussion. Based on our conversation, would you like me to implement it differently?\"\n```\n\n### Conversation-Only Restore\n\n**Scenario: Code is good, but conversation went off track**\n\n```bash\nClaude: *correct implementation but confusing discussion*\n\nUser: \"The code is fine, but let's restart the conversation\"\n\n/rewind\n\nSelect: 2. [10 min ago] Started authentication implementation\nRestore: [C] Conversation Only\n\nâœ“ Conversation rewound\nâœ“ Code changes preserved\n\nClaude: \"Let's start fresh. What would you like to work on?\"\n```\n\n### Manual Checkpoint Creation\n\n**Scenario: Before making risky database migration**\n\n```bash\nUser: \"I'm about to migrate the database schema\"\n\n/checkpoint-manager --create \"Before database migration\"\n\nâœ“ Manual checkpoint created\n  Name: Before database migration\n  Files: 0 (pre-change snapshot)\n  Time: 2025-10-25 14:30:00\n\nUser: \"Proceed with migration\"\n\nClaude: *performs migration*\n\n# If issues occur:\n/rewind\n\n[Checkpoints]\n1. [Manual] Before database migration\n2. [Auto] Previous changes...\n\nSelect: 1 (Manual checkpoint)\nâœ“ Restored to pre-migration state\n```\n\n### Preview Changes Before Rewind\n\n```bash\n/checkpoint-manager --preview\n\n[Checkpoint Preview]\nRestoring to: [5 min ago] Implemented caching layer\n\nFiles to be reverted:\n  src/services/cache.service.ts\n    - 45 lines added will be removed\n    - 12 lines modified will be restored\n  \n  src/config/redis.config.ts\n    - File will be deleted (was created in this session)\n  \n  tests/cache.service.test.ts\n    - File will be deleted (was created in this session)\n\nConversation:\n  - Last 8 messages will be removed\n  - Rewind to: \"Let's add a caching layer\"\n\nProceed with rewind? (y/n): y\n\nâœ“ Checkpoint restored\n```\n\n### List All Checkpoints\n\n```bash\n/checkpoint-manager --list\n\n[Session Checkpoints]\n\nğŸ“ Manual Checkpoints:\n1. Before database migration (14:30:00)\n   Files: Initial state preserved\n\nâš¡ Auto Checkpoints:\n2. Implemented user authentication (14:25:12)\n   Files: auth.service.ts, user.model.ts, routes/auth.ts\n   \n3. Fixed login validation (14:20:45)\n   Files: auth.service.ts\n   \n4. Created auth endpoint (14:15:33)\n   Files: routes/auth.ts\n   \n5. Added password hashing (14:10:22)\n   Files: auth.service.ts, user.model.ts\n\nTotal: 5 checkpoints (1 manual, 4 auto)\nSession duration: 25 minutes\n```\n\n## Checkpoint Limitations\n\n### What Checkpoints DO Track\nâœ… File edits made by Claude Code tools (edit_file, write_file)\nâœ… File content at time of snapshot\nâœ… Conversation history and context\nâœ… File metadata (permissions, timestamps)\n\n### What Checkpoints DON'T Track\nâŒ Bash command side effects (files created by shell commands)\nâŒ Manual edits made outside Claude Code\nâŒ git operations (commits, pushes, merges)\nâŒ Database changes\nâŒ External API calls\n\n### Example: Bash Limitations\n```bash\nUser: \"Create a backup directory\"\n\nClaude: *runs bash command*\n$ mkdir backup && cp -r src backup/\n\nâœ“ Directory created\n\n# Later, rewind checkpoint\n/rewind\n\nâš ï¸  Warning: Checkpoint cannot revert bash command side effects\n    The 'backup' directory will remain\n    You may need to manually clean up:\n    $ rm -rf backup\n```\n\n## Integration with Git\n\n### Checkpoints vs Git Commits\n\n**Checkpoints:**\n- Session-level (temporary)\n- Automatic, no manual intervention\n- Fast rewind (instant)\n- Lost after session ends\n\n**Git Commits:**\n- Permanent version control\n- Manual commit process\n- Can share with team\n- Persistent across sessions\n\n### Recommended Workflow\n```bash\n1. Checkpoints for exploration:\n   - Try risky changes\n   - Rewind if doesn't work\n   - Iterate until satisfied\n\n2. Git commits for milestones:\n   - Commit when checkpoint result is good\n   - Permanent record\n   - Share with team\n```\n\n### Example: Checkpoint + Git Workflow\n```bash\nUser: \"Try refactoring the auth system\"\n\nClaude: *refactors*\n\n[Auto Checkpoint: Before auth refactor]\n\nUser: *tests*\nUser: \"Works great! Commit this\"\n\n/git-smart-commit \"Refactor auth system for better separation of concerns\"\n\nâœ“ Committed to git\nâœ“ Checkpoint becomes permanent\n```\n\n## Advanced Patterns\n\n### Exploratory Coding Pattern\n```bash\n1. Manual checkpoint before exploration\n   /checkpoint-manager --create \"Before experiment\"\n\n2. Try Approach A\n   - Implement\n   - Test\n   - Not ideal? Rewind\n\n3. Try Approach B\n   - Implement\n   - Test\n   - Better? Keep it\n\n4. Commit successful approach\n   git commit -m \"Implemented approach B\"\n```\n\n### Refactoring Safety Net\n```bash\n# Before large refactor:\n/checkpoint-manager --create \"Before refactor: Working state\"\n\n# Refactor incrementally:\n1. Refactor module A\n2. Test\n3. If broken, rewind\n4. If working, continue\n5. Refactor module B\n6. Repeat\n\n# Final: Commit all changes\ngit commit -m \"Refactored modules A-E\"\n```\n\n### Debugging with Checkpoints\n```bash\nUser: \"The app broke, not sure when\"\n\n/checkpoint-manager --list\n\n[Checkpoints]\n1. [5 min ago] Added caching\n2. [10 min ago] Optimized queries  \n3. [15 min ago] Updated dependencies\n4. [20 min ago] Fixed validation\n\n# Binary search for breaking change:\nRestore to checkpoint 2\n  â†’ Still broken\nRestore to checkpoint 3  \n  â†’ Works!\n  \nConclusion: \"Optimized queries\" (checkpoint 2) broke the app\n\n# Fix the query optimization:\nUser: \"The query optimization broke it. Let's fix that specific change\"\n```\n\n## Configuration\n\n### Auto-Checkpoint Settings\n```json\n// .claude/checkpoint.config.json\n{\n  \"autoCheckpoint\": {\n    \"enabled\": true,\n    \"interval\": 1,  // Every N file edits\n    \"maxCheckpoints\": 50,  // Keep last 50 checkpoints\n    \"includeTests\": false  // Don't checkpoint test file changes\n  },\n  \"rewindDefaults\": {\n    \"restoreMode\": \"both\",  // code-only, conversation-only, both\n    \"confirmBeforeRestore\": true,\n    \"showPreview\": true\n  }\n}\n```\n\n### Disable Auto-Checkpoints\n```bash\n/checkpoint-manager --disable-auto\n\nâš ï¸  Auto-checkpoints disabled\n    You can still create manual checkpoints with:\n    /checkpoint-manager --create \"checkpoint name\"\n```\n\n### Custom Checkpoint Intervals\n```bash\n/checkpoint-manager --interval=5\n\nâœ“ Auto-checkpoints will be created every 5 file edits\n```\n\n## Best Practices\n\n1. **Create Manual Checkpoints Before Risk**\n   - Database migrations\n   - Large refactors\n   - Experimental approaches\n\n2. **Use Code-Only Restore for Discussion Preservation**\n   - Valuable context in conversation\n   - Only code needs reverting\n\n3. **Preview Before Rewind**\n   - Verify what will be reverted\n   - Avoid accidental loss of good changes\n\n4. **Commit Good Checkpoints to Git**\n   - Checkpoints are temporary (session-only)\n   - Git commits are permanent\n\n5. **Don't Rely on Checkpoints for Bash Commands**\n   - Checkpoints don't track shell side effects\n   - Use git for permanent backups\n\n6. **Regular Manual Checkpoints for Long Sessions**\n   - Every 30-60 minutes\n   - Before context switches\n\n7. **Clean Up After Bash Reverts**\n   - Manually remove directories/files created by shell\n   - Checkpoints will warn about bash limitations\n\n## Troubleshooting\n\n### \"No checkpoints available\"\n```\nCause: Session just started, no changes made yet\nSolution: Make some changes first, checkpoints auto-create\n```\n\n### \"Cannot rewind bash command changes\"\n```\nCause: Bash commands create files outside checkpoint tracking\nSolution: Manually clean up with reverse commands\n  Created directory: rm -rf directory\n  Modified external files: restore from git\n```\n\n### \"Checkpoint restored but issue persists\"\n```\nCause: Issue may be in database, environment, or external state\nSolution: Check non-code factors:\n  - Database state\n  - Environment variables\n  - External service configuration\n```\n\n### \"Lost conversation context after rewind\"\n```\nCause: Restored \"both\" which includes conversation\nSolution: Use \"code-only\" restore to preserve discussion\n  /rewind â†’ Select checkpoint â†’ [R] Code Only\n```",
  "configuration": {
    "temperature": 0.3,
    "maxTokens": 8000,
    "systemPrompt": "You are a Claude Code checkpoint management expert specializing in safe code exploration, session recovery, and rewind workflows for fearless development"
  },
  "githubUrl": "https://github.com/anthropics/claude-code",
  "documentationUrl": "https://docs.claude.com/en/docs/claude-code/checkpointing",
  "discoveryMetadata": {
    "researchDate": "2025-10-25",
    "trendingSources": [
      {
        "source": "anthropic_announcement",
        "evidence": "Anthropic announced checkpointing feature to enable Claude Code autonomous work with confidence, automatically capturing state before every edit",
        "url": "https://www.anthropic.com/news/enabling-claude-code-to-work-more-autonomously",
        "relevanceScore": "high"
      },
      {
        "source": "medium_tutorial",
        "evidence": "Joe Njenga's 'How I'm Using Claude Code 2.0 Checkpoints to Code Without Fear' (Oct 2025) showing practical checkpoint workflows and anxiety reduction",
        "url": "https://medium.com/@joe.njenga/how-im-using-claude-code-2-0-checkpoints-newest-feature-to-code-without-fear-f872993d3f40",
        "relevanceScore": "high"
      },
      {
        "source": "hacker_news",
        "evidence": "HackerNews discussion 'Claude Code Checkpoints' with developers praising ESC+ESC quick rewind feature for safe exploration",
        "url": "https://news.ycombinator.com/item?id=45050090",
        "relevanceScore": "high"
      },
      {
        "source": "third_party_tool",
        "evidence": "Ccundo tool created as 'Restore Checkpoint' solution showing demand for checkpoint management workflows beyond built-in features",
        "url": "https://apidog.com/blog/ccundo/",
        "relevanceScore": "medium"
      }
    ],
    "keywordResearch": {
      "primaryKeywords": [
        "Claude Code checkpoints",
        "code rewind",
        "session recovery",
        "ESC ESC",
        "safe refactoring"
      ],
      "searchVolume": "medium",
      "competitionLevel": "low"
    },
    "gapAnalysis": {
      "existingContent": [],
      "identifiedGap": "No existing command for checkpoint management despite checkpointing being major 2025 feature. Users know about ESC+ESC but not full capabilities: manual checkpoints, preview mode, code-only vs conversation-only restore. Medium tutorial shows 'code without fear' use case but no unified command helps users maximize checkpoint features. Third-party tools (Ccundo) show unmet needs.",
      "priority": "medium"
    },
    "approvalRationale": "Checkpointing is breakthrough 2025 feature enabling 'code without fear' as Medium tutorial demonstrates. Anthropic positioned this as enabling autonomous work with safety net. ESC+ESC is known but advanced features (manual checkpoints, selective restore, preview) are poorly documented. Medium search volume, low competition, and proven anxiety-reduction benefits make this valuable content for safe exploration workflows."
  },
  "troubleshooting": [
    {
      "issue": "ESC+ESC shortcut not opening checkpoint menu, no response",
      "solution": "Verify Claude Code version 2.0.20+ supports checkpointing. Try /rewind command instead of ESC+ESC. Check if session has any checkpoints: /checkpoint-manager --list. Restart Claude Code if shortcut unresponsive."
    },
    {
      "issue": "Checkpoint restored but changes still present in files",
      "solution": "Checkpoints only revert changes made by Claude Code tools (edit_file, write_file), not bash commands. Check if changes were made via shell: they won't be reverted. Manually undo bash command side effects. Use git status to see actual file state."
    },
    {
      "issue": "Lost all checkpoints after closing Claude Code session",
      "solution": "Checkpoints are session-scoped, not persistent across sessions. Critical checkpoints should be committed to git before ending session. Use /checkpoint-manager --create 'Before closing' then git commit to preserve state permanently."
    },
    {
      "issue": "Rewind conversation but Claude lost important context discussed earlier",
      "solution": "Conversation rewind removes messages after checkpoint. Use 'code-only' restore to preserve discussion: /rewind â†’ [R] Code Only. Alternatively, copy important context to CLAUDE.md before rewinding for permanent preservation."
    },
    {
      "issue": "Cannot find checkpoint for specific change, too many auto-checkpoints listed",
      "solution": "Create manual checkpoints at critical points: /checkpoint-manager --create 'descriptive name'. Manual checkpoints appear at top of list with ğŸ“ indicator. Reduce auto-checkpoint frequency: --interval=5 for every 5 edits instead of every edit."
    }
  ],
  "source": "community",
  "slug": "checkpoint-manager",
  "seoTitle": "Checkpoint Manager for Claude Code"
}
