{
  "description": "Configure and connect MCP servers to Claude Code with OAuth authentication, tool access, and remote server support for seamless external integrations",
  "category": "commands",
  "author": "JSONbored",
  "dateAdded": "2025-10-25",
  "tags": ["mcp", "integration", "oauth", "remote-server", "tools", "setup"],
  "content": "The `/mcp-setup` command guides you through configuring Model Context Protocol (MCP) servers in Claude Code, enabling seamless integration with external tools, databases, and APIs through Anthropic's open-source standard.\n\n## Features\n\n- **Remote MCP Server Support**: Connect to cloud-hosted MCP servers with native OAuth authentication\n- **Local Server Configuration**: Set up containerized MCP servers using Docker MCP Toolkit\n- **Project-Scoped Setup**: Configure `.mcp.json` for team-wide server access\n- **User-Global Setup**: Install personal MCP servers available across all projects\n- **OAuth Management**: One-click authentication with secure credential storage\n- **Tool Discovery**: Automatically detect and enable available tools from connected servers\n- **Resource Access**: Grant Claude Code access to databases, file systems, and APIs\n- **Health Monitoring**: Verify server connectivity and troubleshoot connection issues\n\n## Usage\n\n```bash\n/mcp-setup [server-type] [options]\n```\n\n### Server Types\n\n- `--remote` - Configure remote MCP server with OAuth (default)\n- `--local` - Set up local/Docker MCP server\n- `--list` - List all available MCP servers from marketplace\n- `--status` - Check status of configured servers\n\n### Configuration Scope\n\n- `--project` - Add to `.mcp.json` (team-shared, checked into git)\n- `--user` - Add to `~/.config/claude/mcp.json` (personal)\n\n### Popular Servers\n\n- `--github` - GitHub REST API integration\n- `--linear` - Linear issue tracking\n- `--sentry` - Error monitoring integration\n- `--postgres` - PostgreSQL database access\n- `--mongodb` - MongoDB database integration\n- `--slack` - Slack messaging integration\n- `--google-drive` - Google Drive file access\n- `--aws` - AWS service integration\n\n## Examples\n\n### Remote GitHub MCP Server with OAuth\n\n**Command:**\n```bash\n/mcp-setup --remote --github --project\n```\n\n**What happens:**\n1. Claude detects project needs GitHub integration\n2. Generates `.mcp.json` configuration:\n\n```json\n{\n  \"mcpServers\": {\n    \"github\": {\n      \"type\": \"remote\",\n      \"url\": \"https://mcp.github.com\",\n      \"auth\": {\n        \"type\": \"oauth\",\n        \"provider\": \"github\"\n      },\n      \"tools\": [\n        \"create_pull_request\",\n        \"get_repository\",\n        \"list_issues\",\n        \"create_issue\",\n        \"update_issue\",\n        \"merge_pull_request\"\n      ],\n      \"resources\": [\n        \"repository://repos\",\n        \"issue://issues\",\n        \"pull_request://pulls\"\n      ]\n    }\n  }\n}\n```\n\n3. Prompts OAuth flow:\n   - Opens browser for GitHub authentication\n   - Requests necessary scopes (repo, issues, pull_requests)\n   - Stores OAuth token securely in system keychain\n\n4. Verifies connection:\n   - Tests API connectivity\n   - Lists available repositories\n   - Confirms tool access\n\n**Usage in Claude Code:**\n```bash\n# Claude can now use GitHub tools automatically\nUser: \"Create a PR for my authentication refactor\"\nClaude: *uses create_pull_request tool from GitHub MCP server*\n\nUser: \"What issues are assigned to me?\"\nClaude: *uses list_issues tool to fetch assigned issues*\n```\n\n### Local Postgres MCP Server with Docker\n\n**Command:**\n```bash\n/mcp-setup --local --postgres --project\n```\n\n**Generated Configuration:**\n```json\n{\n  \"mcpServers\": {\n    \"postgres\": {\n      \"type\": \"stdio\",\n      \"command\": \"docker\",\n      \"args\": [\n        \"run\",\n        \"-i\",\n        \"--rm\",\n        \"--network=host\",\n        \"mcp/postgres\"\n      ],\n      \"env\": {\n        \"POSTGRES_CONNECTION_STRING\": \"postgresql://localhost:5432/mydb\"\n      },\n      \"tools\": [\n        \"execute_query\",\n        \"list_tables\",\n        \"describe_table\",\n        \"get_schema\"\n      ]\n    }\n  }\n}\n```\n\n**Environment Setup:**\n```bash\n# Claude creates .env.local for secrets\nPOSTGRES_CONNECTION_STRING=postgresql://user:password@localhost:5432/mydb\n```\n\n**Usage:**\n```bash\nUser: \"What tables are in the database?\"\nClaude: *uses list_tables tool*\n\nUser: \"Show me all users created in the last week\"\nClaude: *uses execute_query tool with date filtering*\n```\n\n### Multiple MCP Servers for Full-Stack Project\n\n**Command:**\n```bash\n/mcp-setup --project --github --linear --sentry --postgres\n```\n\n**Generated `.mcp.json`:**\n```json\n{\n  \"mcpServers\": {\n    \"github\": {\n      \"type\": \"remote\",\n      \"url\": \"https://mcp.github.com\",\n      \"auth\": { \"type\": \"oauth\", \"provider\": \"github\" }\n    },\n    \"linear\": {\n      \"type\": \"remote\",\n      \"url\": \"https://mcp.linear.app\",\n      \"auth\": { \"type\": \"oauth\", \"provider\": \"linear\" }\n    },\n    \"sentry\": {\n      \"type\": \"remote\",\n      \"url\": \"https://mcp.sentry.io\",\n      \"auth\": {\n        \"type\": \"bearer\",\n        \"token\": \"${SENTRY_AUTH_TOKEN}\"\n      }\n    },\n    \"postgres\": {\n      \"type\": \"stdio\",\n      \"command\": \"docker\",\n      \"args\": [\"run\", \"-i\", \"--rm\", \"mcp/postgres\"],\n      \"env\": {\n        \"POSTGRES_CONNECTION_STRING\": \"${POSTGRES_CONNECTION_STRING}\"\n      }\n    }\n  }\n}\n```\n\n**Workflow Integration:**\n```bash\nUser: \"Check Sentry for errors related to authentication, create Linear tickets for each unique error, and analyze the auth database table\"\n\nClaude:\n1. *Uses Sentry MCP to fetch recent auth errors*\n2. *Groups by error type and stack trace*\n3. *Uses Linear MCP to create tickets with error details*\n4. *Uses Postgres MCP to query auth table for affected users*\n5. Presents comprehensive report with tickets created\n```\n\n### User-Global MCP Servers (Personal Setup)\n\n**Command:**\n```bash\n/mcp-setup --user --slack --google-drive\n```\n\n**Configuration Location:**\n```\n~/.config/claude/mcp.json\n```\n\n**Benefit:**\n- Available across ALL projects\n- Personal authentication (not shared with team)\n- Useful for productivity tools\n\n## MCP Server Marketplace\n\n### Development Tools\n- **GitHub** - Repository management, PRs, issues, CI/CD\n- **GitLab** - GitLab API integration\n- **Bitbucket** - Bitbucket Cloud/Server integration\n\n### Issue Tracking\n- **Linear** - Issue tracking and project management\n- **Jira** - Atlassian Jira integration\n- **Asana** - Task management\n\n### Monitoring & Observability\n- **Sentry** - Error tracking and monitoring\n- **Datadog** - Infrastructure monitoring\n- **New Relic** - Application performance monitoring\n\n### Databases\n- **PostgreSQL** - PostgreSQL database access\n- **MongoDB** - MongoDB document database\n- **MySQL** - MySQL/MariaDB integration\n- **Redis** - Redis cache and data structure store\n- **Supabase** - Supabase backend platform\n\n### Cloud Platforms\n- **AWS** - Amazon Web Services integration\n- **Google Cloud** - GCP service integration\n- **Azure** - Microsoft Azure integration\n- **Vercel** - Vercel deployment platform\n- **Cloudflare** - Cloudflare edge platform\n\n### Communication\n- **Slack** - Slack messaging and notifications\n- **Discord** - Discord server integration\n- **Notion** - Notion workspace access\n\n### AI & ML\n- **Pinecone** - Vector database for embeddings\n- **Weaviate** - Vector search engine\n- **Chroma** - Embedding database\n\n## Authentication Methods\n\n### OAuth 2.0 (Recommended for Remote Servers)\n```json\n{\n  \"auth\": {\n    \"type\": \"oauth\",\n    \"provider\": \"github\",\n    \"scopes\": [\"repo\", \"issues\"]\n  }\n}\n```\n\n**Benefits:**\n- No API keys to manage\n- Automatic token refresh\n- Secure credential storage\n- One-click authentication\n\n### Bearer Token\n```json\n{\n  \"auth\": {\n    \"type\": \"bearer\",\n    \"token\": \"${API_TOKEN}\"\n  }\n}\n```\n\n**Use When:**\n- Service doesn't support OAuth\n- Using API keys or personal access tokens\n- Environment variables preferred\n\n### No Authentication (Local/Docker)\n```json\n{\n  \"type\": \"stdio\",\n  \"command\": \"docker\",\n  \"args\": [\"run\", \"-i\", \"--rm\", \"mcp/server\"]\n}\n```\n\n**Use When:**\n- Local development servers\n- Containerized services\n- Internal network resources\n\n## Docker MCP Toolkit\n\n### Installing MCP Toolkit\n```bash\n# Claude runs this automatically\ndocker pull mcp/toolkit\n```\n\n### Available Containerized Servers (200+)\n- Pre-built, security-audited containers\n- One-command installation\n- Isolated environments\n- Automatic updates\n\n### Example: Setup Multiple Servers via Docker\n```bash\n/mcp-setup --local --postgres --redis --mongodb\n```\n\n**Generated docker-compose.yml:**\n```yaml\nversion: '3.8'\nservices:\n  mcp-postgres:\n    image: mcp/postgres\n    environment:\n      - POSTGRES_CONNECTION_STRING=${POSTGRES_CONNECTION_STRING}\n    network_mode: host\n\n  mcp-redis:\n    image: mcp/redis\n    environment:\n      - REDIS_URL=${REDIS_URL}\n    network_mode: host\n\n  mcp-mongodb:\n    image: mcp/mongodb\n    environment:\n      - MONGODB_URI=${MONGODB_URI}\n    network_mode: host\n```\n\n## Health Monitoring & Troubleshooting\n\n### Check Server Status\n```bash\n/mcp-setup --status\n```\n\n**Output:**\n```\n✓ github (remote) - Connected, 6 tools available\n✓ linear (remote) - Connected, 8 tools available\n✗ postgres (local) - Connection failed: Docker container not running\n⚠ sentry (remote) - Connected, rate limit: 80% used\n```\n\n### Test Server Connection\n```bash\n/mcp-setup --test github\n```\n\n**Verification Steps:**\n1. Ping server endpoint\n2. Verify authentication\n3. List available tools\n4. Test tool invocation\n5. Check resource access\n\n## Security Best Practices\n\n### Project vs User Configuration\n\n**Project (`.mcp.json` - checked into git):**\n```json\n{\n  \"mcpServers\": {\n    \"github\": {\n      \"type\": \"remote\",\n      \"url\": \"https://mcp.github.com\",\n      \"auth\": {\n        \"type\": \"oauth\",\n        \"provider\": \"github\"\n      }\n    }\n  }\n}\n```\n- ✅ Server configuration (URLs, tool lists)\n- ✅ Authentication *method* (oauth, bearer)\n- ❌ NO secrets or tokens\n\n**User (`~/.config/claude/mcp.json` - personal):**\n- ✅ OAuth tokens (stored in system keychain)\n- ✅ Personal API keys\n- ✅ User-specific servers\n\n### Environment Variables for Secrets\n```bash\n# .env.local (NOT checked into git)\nSENTRY_AUTH_TOKEN=abc123...\nPOSTGRES_CONNECTION_STRING=postgresql://...\nAWS_ACCESS_KEY_ID=AKIA...\nAWS_SECRET_ACCESS_KEY=...\n```\n\n**Reference in `.mcp.json`:**\n```json\n{\n  \"auth\": {\n    \"type\": \"bearer\",\n    \"token\": \"${SENTRY_AUTH_TOKEN}\"\n  }\n}\n```\n\n## Advanced Configuration\n\n### Tool Permissions (Restrict Access)\n```json\n{\n  \"mcpServers\": {\n    \"github\": {\n      \"tools\": [\"get_repository\", \"list_issues\"],\n      \"excludeTools\": [\"delete_repository\", \"force_push\"]\n    }\n  }\n}\n```\n\n### Resource Filtering\n```json\n{\n  \"mcpServers\": {\n    \"postgres\": {\n      \"resources\": [\"table://users\", \"table://posts\"],\n      \"excludeResources\": [\"table://internal_*\"]\n    }\n  }\n}\n```\n\n### Rate Limiting\n```json\n{\n  \"mcpServers\": {\n    \"github\": {\n      \"rateLimit\": {\n        \"requests\": 100,\n        \"period\": \"hour\"\n      }\n    }\n  }\n}\n```\n\n## Migration from Manual Setup\n\n### Before (Manual Configuration)\n```json\n// Scattered across multiple config files\n// Manual OAuth flow\n// No centralized management\n```\n\n### After (`/mcp-setup`)\n```bash\n/mcp-setup --project --github --linear --sentry\n# One command, automatic OAuth, team-ready config\n```\n\n## Team Collaboration\n\n### Shared Project Setup\n1. Lead developer runs `/mcp-setup --project --github --linear`\n2. Commits `.mcp.json` to git\n3. Team members clone repo\n4. Each member authenticates with OAuth (personal credentials)\n5. Everyone has same tool access\n\n### Onboarding New Developers\n```bash\n# New team member clones repo\ngit clone repo.git\ncd repo\n\n# Claude Code detects .mcp.json\nClaude: \"I found 3 MCP servers configured. Would you like to authenticate?\"\nUser: \"yes\"\nClaude: *opens OAuth flows for GitHub, Linear, Sentry*\n\n# Done - fully integrated in 30 seconds\n```\n\n## Best Practices\n\n1. **Use Project Scope for Team Tools**: GitHub, Linear, CI/CD\n2. **Use User Scope for Personal Tools**: Slack, Google Drive, Notion\n3. **Prefer OAuth Over API Keys**: Better security, auto-refresh\n4. **Docker for Local Services**: Isolated, reproducible environments\n5. **Monitor Rate Limits**: Check `--status` regularly\n6. **Test After Setup**: Use `--test` to verify connectivity\n7. **Document Custom Servers**: Add comments in `.mcp.json`\n8. **Version Control Config**: Commit `.mcp.json`, ignore `.env.local`",
  "configuration": {
    "temperature": 0.3,
    "maxTokens": 8000,
    "systemPrompt": "You are an MCP (Model Context Protocol) integration expert specializing in configuring Claude Code to connect with external tools, databases, and APIs through remote and local MCP servers with OAuth authentication"
  },
  "githubUrl": "https://github.com/modelcontextprotocol",
  "documentationUrl": "https://docs.claude.com/en/docs/claude-code/mcp",
  "discoveryMetadata": {
    "researchDate": "2025-10-25",
    "trendingSources": [
      {
        "source": "anthropic_announcement",
        "evidence": "Anthropic announced Remote MCP support in Claude Code (June 2025) with native OAuth authentication and support for cloud-hosted MCP servers",
        "url": "https://www.anthropic.com/news/claude-code-remote-mcp",
        "relevanceScore": "high"
      },
      {
        "source": "openai_adoption",
        "evidence": "OpenAI officially adopted MCP standard (March 2025) across ChatGPT desktop, Agents SDK, and Responses API - major platform validation",
        "url": "https://www.infoq.com/news/2025/06/anthropic-claude-remote-mcp/",
        "relevanceScore": "high"
      },
      {
        "source": "ecosystem_growth",
        "evidence": "1,000+ MCP servers created by developers by February 2025, with Docker MCP Toolkit offering 200+ pre-built containerized servers",
        "url": "https://www.docker.com/blog/add-mcp-servers-to-claude-code-with-mcp-toolkit/",
        "relevanceScore": "high"
      },
      {
        "source": "usage_statistics",
        "evidence": "Claude Code saw 160% user growth following MCP remote server support launch, indicating strong market adoption",
        "url": "https://www.anthropic.com/news/claude-code-remote-mcp",
        "relevanceScore": "high"
      }
    ],
    "keywordResearch": {
      "primaryKeywords": [
        "MCP server setup",
        "Model Context Protocol",
        "Claude Code integration",
        "MCP OAuth",
        "remote MCP server"
      ],
      "searchVolume": "high",
      "competitionLevel": "medium"
    },
    "gapAnalysis": {
      "existingContent": [],
      "identifiedGap": "No existing command content for MCP server configuration in Claude Code. With 1,000+ servers available, OpenAI adoption in March 2025, and 160% user growth, this represents critical infrastructure setup that every Claude Code user needs. Current guides are fragmented across documentation sites - no single command-driven workflow exists.",
      "priority": "high"
    },
    "approvalRationale": "MCP server integration is the #1 trending Claude Code feature in 2025 with ecosystem explosion (1,000+ servers), major platform adoption (OpenAI, Google DeepMind), and 160% user growth after remote server support. This fills a critical gap as NO existing command helps users configure MCP servers, despite this being foundational infrastructure for modern Claude Code workflows. High search volume, medium competition, and forward-looking relevance make this essential content."
  },
  "troubleshooting": [
    {
      "issue": "OAuth flow fails with 'redirect_uri mismatch' error during MCP server authentication",
      "solution": "Verify Claude Code version 2.0.20+ supports remote MCP OAuth. Check server configuration uses correct callback URL: http://localhost:3000/oauth/callback. Restart Claude Code after updating .mcp.json to refresh OAuth handlers."
    },
    {
      "issue": "MCP server shows 'Connected' but tools are not available to Claude during conversation",
      "solution": "Run /mcp-setup --status to verify tools list. Check .mcp.json 'tools' array includes desired tool names. Some servers require explicit tool enabling - add 'tools': ['*'] to enable all. Restart Claude Code session to refresh tool registry."
    },
    {
      "issue": "Docker MCP server fails with 'container not found' despite successful setup command",
      "solution": "Verify Docker daemon is running: docker ps. Check container image pulled: docker images | grep mcp. Use --network=host flag in args array. For Apple Silicon, add 'platform': 'linux/amd64' to server config."
    },
    {
      "issue": "Environment variable substitution fails with 'token is undefined' in bearer auth",
      "solution": "Ensure .env.local exists in project root with variable defined. Claude Code loads env vars from .env.local, .env, or shell environment. Use ${VAR_NAME} syntax in .mcp.json. Restart Claude Code to reload environment variables after changes."
    },
    {
      "issue": "Rate limit errors when using GitHub MCP server with 'API rate limit exceeded' message",
      "solution": "Check rate limit status: /mcp-setup --status. OAuth tokens have higher rate limits than API keys - switch to OAuth auth type. Add 'rateLimit' config to slow Claude's request frequency. Cache frequently accessed resources in CLAUDE.md to reduce API calls."
    }
  ],
  "source": "claudepro",
  "slug": "mcp-setup",
  "seoTitle": "MCP Server Setup for Claude Code"
}
